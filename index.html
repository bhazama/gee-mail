<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
  window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
  //console.log(window.geemails);
  
  var titleLine = document.createElement("h2");
  titleLine.id = "titleLine";
  titleLine.innerHTML = "Gee-Mail Challenge";
  main.appendChild(titleLine);
  

  var count = 0;
  for(var i = 0; i<window.geemails.length;i++){
    count+=1;

    var inboxCount = document.createElement("div");
    inboxCount.className = "inbox";
    inboxCount.innerHTML = "INBOX COUNT: " + count;
    main.appendChild(inboxCount);

    var subjectElem = document.createElement("div");
    subjectElem.className = "subject";
    subjectElem.innerHTML = "SUBJECT: " + window.geemails[i].subject;
    main.appendChild(subjectElem);

    var dateElem = document.createElement("div");
    dateElem.className = "date";
    dateElem.innerHTML = "DATE: " + window.geemails[i].date;
    main.appendChild(dateElem);

    var senderElem = document.createElement("div");
    senderElem.className = "sender";
    senderElem.innerHTML = "SENDER: " + window.geemails[i].sender;
    main.appendChild(senderElem);

    var bodyElem = document.createElement("div");
    bodyElem.className = "body";
    bodyElem.innerHTML = "BODY: " + window.geemails[i].body;
    senderElem.appendChild(bodyElem);

  }
  

    
    toggleElem = document.getElementsByClassName("sender");
    for(var j = 0; j<toggleElem.length; j++){
    toggleElem[j].addEventListener("click", toggleShow);
    }
    

    function toggleShow(){
    var newBody = this.querySelectorAll(".body")[0];
    if(newBody.style.display === "block"){
        newBody.style.display = "none";
      }else{
        newBody.style.display = "block";
      }
    }

    
    //console.log(getNewMessage());
    
    function newMessage(){
      
      
      var msg = getNewMessage();
      console.log(msg);
      
      var inboxCount = document.createElement("div");
      inboxCount.className = "inbox";
      inboxCount.innerHTML = "INBOX COUNT: " + count;
      main.appendChild(inboxCount);

      var newDate = document.createElement("div");
      newDate.className = "nDate";
      newDate.innerHTML = "DATE: " + msg.date;
      main.appendChild(newDate);

      var newSubject = document.createElement("div");
      newSubject.className = "nSubject";
      newSubject.innerHTML = "SUBJECT: " + msg.subject;
      main.appendChild(newSubject);

      var newSender = document.createElement("div");
      newSender.className = "nSender";
      newSender.innerHTML ="SENDER: " + msg.sender;
      main.appendChild(newSender);

      var newBodyz = document.createElement("div");
      newBodyz.className = "nBody";
      newBodyz.innerHTML = "BODY: " + msg.body;
      newSender.appendChild(newBodyz);
      
      count++;
      
      


    
    var nToggleElem = document.getElementsByClassName("nSender");
    for(var p = 0; p<nToggleElem.length; p++){
    nToggleElem[p].addEventListener("click", toggleNew);
    }

    function toggleNew(){
      var nuBody = this.querySelectorAll(".nBody")[0];
      if(nuBody.style.display === "block"){
        nuBody.style.display = "none";
        }else{
        nuBody.style.display = "block";

        }
      }
    }
    
  setInterval(newMessage, 5000);


  };
    </script>
	</head>
	<body>
		<div class="container" id="main">
      
        
		
		</div>
	</body>
</html>